# Dev-Kid Skills Reference

**Version**: 2.0.0
**Last Updated**: 2026-01-05

Complete reference for all dev-kid skills with trigger conditions, input/output specifications, and usage examples.

---

## Table of Contents

1. [Overview](#overview)
2. [Skills Architecture](#skills-architecture)
3. [Core Skills](#core-skills)
   - [sync_memory.sh](#sync_memorysh)
   - [checkpoint.sh](#checkpointsh)
   - [verify_existence.sh](#verify_existencesh)
   - [maintain_integrity.sh](#maintain_integritysh)
   - [finalize_session.sh](#finalize_sessionsh)
   - [recall.sh](#recallsh)
4. [Skill Integration](#skill-integration)
5. [Creating New Skills](#creating-new-skills)

---

## Overview

Skills are self-contained bash scripts that encapsulate common development workflows. They:

- **Auto-activate**: Triggered by keyword detection in Claude Code conversations
- **Zero coordination**: No manual invocation needed
- **Composable**: Skills can call other skills
- **Portable**: Work in any project with dev-kid initialized

### Installation Location

- System: `~/.dev-kid/skills/*.sh`
- Claude Code: `~/.claude/skills/planning-enhanced/*.sh` (symlinks)

### Execution Context

Skills run in the **project root directory**, with access to:
- Memory Bank files (`memory-bank/`)
- Context Protection files (`.claude/`)
- Git repository (`.git/`)
- Project files

---

## Skills Architecture

### Activation Pattern

```
User/Agent Message
        â†“
Keyword Detection (Claude Code)
        â†“
Skill Execution
        â†“
Output to User/Agent
        â†“
State Persistence
```

### Shared Conventions

All skills follow these conventions:

1. **Shebang**: `#!/usr/bin/env bash`
2. **Error handling**: `set -e` (exit on error)
3. **User feedback**: Echo emoji + status messages
4. **State persistence**: Write to disk, not just memory
5. **Idempotency**: Safe to run multiple times

---

## Core Skills

### sync_memory.sh

Update Memory Bank with current project state.

#### Metadata

**File**: `~/.dev-kid/skills/sync_memory.sh`
**Triggers**: "sync memory", "update memory", after code changes, before checkpoint
**Dependencies**: Git, tasks.md (optional)
**Runtime**: ~500ms

#### Purpose

Synchronize Memory Bank files with current git state and task progress. Ensures Memory Bank always reflects latest project status.

#### Input

**Required**:
- None (reads from current directory)

**Optional**:
- `tasks.md`: If present, calculates progress metrics

**Environment**:
- `$USER`: Current username (for private directory path)

#### Output

**Files Modified**:
1. `memory-bank/private/$USER/activeContext.md`
2. `memory-bank/private/$USER/progress.md`
3. `.claude/activity_stream.md` (appended)

**stdout**:
```
ðŸ’¾ Syncing Memory Bank...
   Updating activeContext.md...
   Updating progress.md from tasks.md...
âœ… Memory Bank synced
```

#### Algorithm

```bash
1. Get git changes since last commit (git diff HEAD --stat)
2. Update activeContext.md:
   - Current focus (last commit message)
   - Recent changes (git diff stats)
   - Modified files list
   - Default next actions
3. If tasks.md exists:
   - Count total tasks (grep -c "^- \[")
   - Count completed tasks (grep -c "^- \[x\]")
   - Calculate percentage
   - Update progress.md with metrics and task list
4. Append sync event to activity_stream.md
```

#### Usage Examples

**Manual invocation**:
```bash
cd ~/project
~/.dev-kid/skills/sync_memory.sh
```

**Via CLI**:
```bash
dev-kid sync-memory
```

**Claude Code auto-activation**:
```
User: "Can you sync the memory bank with the latest changes?"
```

#### Exit Codes

- `0`: Success
- `1`: Memory Bank directories not found

#### Edge Cases

**No git changes**:
- Output: "No changes" in activeContext.md

**No tasks.md**:
- progress.md not updated (skipped)

**Empty tasks.md**:
- Progress: 0/0 tasks (0%)

---

### checkpoint.sh

Create semantic git checkpoint with Memory Bank sync.

#### Metadata

**File**: `~/.dev-kid/skills/checkpoint.sh`
**Triggers**: "checkpoint", "create checkpoint", context >80%, session end
**Dependencies**: Git, sync_memory.sh
**Runtime**: ~1-2 seconds (depends on file count)

#### Purpose

Create git commit with standardized format after syncing Memory Bank. Provides semantic checkpoints with Claude co-authorship.

#### Input

**Arguments**:
- `$1` (optional): Checkpoint message (default: "Checkpoint - YYYY-MM-DD HH:MM:SS")

**Example**:
```bash
checkpoint.sh "Feature complete: user authentication"
```

#### Output

**Git commit created**:
```
[CHECKPOINT] Feature complete: user authentication

Sun Jan  5 14:30:00 UTC 2026
Generated by: dev-kit checkpoint skill

Co-Authored-By: Claude Sonnet 4.5 <noreply@anthropic.com>
```

**stdout**:
```
ðŸ“¸ Creating checkpoint: Feature complete

ðŸ’¾ Syncing Memory Bank...
   [sync_memory.sh output]
âœ… Memory Bank synced

âœ… Checkpoint created: a3f2c1b
```

#### Algorithm

```bash
1. Call sync_memory.sh (ensure Memory Bank current)
2. Stage all changes (git add .)
3. Check if changes exist (git diff --cached --quiet)
   - If no changes: exit with info message
4. Create commit with standardized message format:
   - Subject: [CHECKPOINT] {MESSAGE}
   - Body: Timestamp, generator, co-author
5. Output commit hash (git rev-parse --short HEAD)
```

#### Usage Examples

**Default checkpoint**:
```bash
checkpoint.sh
# Message: "Checkpoint - 2026-01-05 14:30:00"
```

**Custom message**:
```bash
checkpoint.sh "All tests passing"
```

**Via CLI**:
```bash
dev-kid checkpoint "Sprint 1 complete"
```

**Claude Code**:
```
User: "Create a checkpoint for the auth feature"
```

#### Exit Codes

- `0`: Success (or no changes to commit)
- `1`: Git staging failed
- `2`: Git commit failed

#### Edge Cases

**No changes**:
- Output: "â„¹ï¸  No changes to commit"
- Exit: 0 (success, but no commit)

**Untracked files**:
- All staged via `git add .`
- Included in commit

**Large changesets**:
- May take longer (>2 seconds)
- All changes committed atomically

---

### verify_existence.sh

Anti-hallucination verification for file and function references.

#### Metadata

**File**: `~/.dev-kid/skills/verify_existence.sh`
**Triggers**: before code generation, before file operations, "verify files"
**Dependencies**: grep (with Perl regex support)
**Runtime**: ~1-5 seconds (depends on codebase size)

#### Purpose

Prevent hallucination by verifying that file references in plans exist in the filesystem. Critical for avoiding wasted effort on non-existent files.

#### Input

**Arguments**:
- `$1` (optional): File to verify (default: "task_plan.md")

**File Format**:
- File references: Backtick-wrapped paths (e.g., \`src/app.py\`)
- Supported extensions: .js, .ts, .py, .md, .json, .sh, .yml, .yaml

**Example task_plan.md**:
```markdown
# Implementation Plan

1. Update `src/app.py` to add authentication
2. Modify `config/database.yml` for connection pooling
3. Create tests in `tests/test_auth.py`
```

#### Output

**Success**:
```
ðŸ” Running anti-hallucination verification...
   Checking file references...
   âœ… Verified: src/app.py
   âœ… Verified: config/database.yml
   âœ… Verified: tests/test_auth.py
   Checking function references...
   âš ï¸  WARNING: Function 'new_authenticate' not found in codebase
âœ… Verification passed
```

**Failure**:
```
ðŸ” Running anti-hallucination verification...
   Checking file references...
   âœ… Verified: src/app.py
   âŒ HALLUCINATION: File does not exist: src/missing.py
   âœ… Verified: tests/test_auth.py

âŒ Verification failed: 1 hallucinated file(s) detected
   Update plan to reference existing files
```

#### Algorithm

```bash
1. Check target file exists
2. Extract file references:
   - Regex: `([^`]+\.(js|ts|py|md|json|sh|yml|yaml))`
   - Remove backticks
   - Deduplicate
3. For each file:
   - Check existence with [ -f "$file" ]
   - Print âœ… if exists, âŒ if not
   - Increment error counter if missing
4. Extract function references:
   - Regex: [a-zA-Z_][a-zA-Z0-9_]*\(
   - Remove parenthesis
5. For each function:
   - Search codebase with grep -rq
   - Print âš ï¸ WARNING if not found (not an error)
6. Exit 1 if errors > 0, else exit 0
```

#### Usage Examples

**Verify default plan**:
```bash
verify_existence.sh
```

**Verify custom file**:
```bash
verify_existence.sh implementation_plan.md
```

**Via CLI**:
```bash
dev-kid verify task_plan.md
```

**Claude Code**:
```
User: "Verify that all files in the plan exist before we start"
```

#### Exit Codes

- `0`: All file references verified
- `1`: Hallucinated files detected
- `2`: Target file not found

#### Edge Cases

**No file references**:
- Output: "Checking file references..." (no files listed)
- Exit: 0 (success)

**Backtick-less references**:
- Plain path regex matches: path/to/file.ext
- Also verified

**New functions**:
- Warnings only, not errors
- Allows for planned implementations

---

### maintain_integrity.sh

Validate system integrity and structure.

#### Metadata

**File**: `~/.dev-kid/skills/maintain_integrity.sh`
**Triggers**: session start, after context compression, "validate system"
**Dependencies**: None
**Runtime**: ~500ms

#### Purpose

Ensure dev-kid system structure is complete and functional. Detects missing files, corrupted structure, or incomplete initialization.

#### Input

**Required**:
- Memory Bank structure
- Context Protection structure
- Git repository (optional, warning only)
- Skills directory (optional, warning only)

#### Output

**Success**:
```
ðŸ”§ Validating system integrity...
   Checking Memory Bank...
   Checking Context Protection...
   Checking Skills...
   âœ… Skills installed: 6
   Checking Git...
   âœ… Git initialized
âœ… System integrity validated
```

**Failure**:
```
ðŸ”§ Validating system integrity...
   Checking Memory Bank...
   âŒ Missing: memory-bank/shared/projectbrief.md
   âŒ Missing: memory-bank/private/alice/activeContext.md
   Checking Context Protection...
   âŒ Missing: .claude/AGENT_STATE.json

âŒ Integrity check failed: 3 error(s)
   Run 'dev-kid init' to repair
```

#### Validation Checks

**Memory Bank Shared** (required):
- `projectbrief.md`
- `systemPatterns.md`
- `techContext.md`
- `productContext.md`

**Memory Bank Private** (required):
- `activeContext.md`
- `progress.md`
- `worklog.md`

**Context Protection** (required):
- `active_stack.md`
- `activity_stream.md`
- `AGENT_STATE.json`
- `system_bus.json`

**Skills** (warning only):
- `~/.claude/skills/planning-enhanced/` directory
- Count of .sh files

**Git** (warning only):
- `.git/` directory exists

#### Usage Examples

**Manual validation**:
```bash
maintain_integrity.sh
```

**Via CLI**:
```bash
dev-kid validate
```

**Session start**:
```
Agent: Running system validation...
[maintain_integrity.sh executed automatically]
```

#### Exit Codes

- `0`: System valid
- `1`: Missing required files

#### Edge Cases

**Fresh project**:
- All files missing
- Suggests: "Run 'dev-kid init' to repair"

**Partial corruption**:
- Reports specific missing files
- Other files validated successfully

**Warning-only failures**:
- Skills or Git missing
- Exit: 0 (warnings don't fail validation)

---

### finalize_session.sh

Create session snapshot and final checkpoint.

#### Metadata

**File**: `~/.dev-kid/skills/finalize_session.sh`
**Triggers**: session end, manual "finalize", context approaching limit
**Dependencies**: sync_memory.sh, checkpoint.sh, jq
**Runtime**: ~2-3 seconds

#### Purpose

Capture complete session state for zero-loss recovery. Creates snapshot with progress, mental state, blockers, and next steps.

#### Input

**Required**:
- Current directory state
- Git repository
- tasks.md (optional, for progress)
- Memory Bank files

#### Output

**Session snapshot JSON**:
`.claude/session_snapshots/snapshot_2026-01-05_14-30-00.json`:
```json
{
  "session_id": "session-1704467400",
  "timestamp": "2026-01-05T14:30:00Z",
  "mental_state": "[active context excerpt]",
  "current_phase": "Feature implementation: user auth",
  "progress": 60,
  "tasks_completed": 12,
  "tasks_total": 20,
  "next_steps": [
    "Review progress.md",
    "Update projectbrief.md if needed",
    "Continue next task from tasks.md"
  ],
  "blockers": [],
  "git_commits": ["a3f2c1b"],
  "files_modified": ["src/auth.py", "tests/test_auth.py"],
  "system_state": {
    "memory_bank": "synchronized",
    "context_protection": "active",
    "skills": "operational"
  }
}
```

**Symlink created**:
`.claude/session_snapshots/snapshot_latest.json` â†’ `snapshot_2026-01-05_14-30-00.json`

**Git checkpoint**:
Commit message: `[CHECKPOINT] Session finalized - 12/20 tasks complete`

**stdout**:
```
ðŸ“¦ Finalizing session...

ðŸ’¾ Syncing Memory Bank...
âœ… Memory Bank synced

ðŸ“¸ Creating checkpoint: Session finalized - 12/20 tasks complete
âœ… Checkpoint created: d4e5f6a

âœ… Session finalized
   Snapshot: .claude/session_snapshots/snapshot_2026-01-05_14-30-00.json
   Progress: 12/20 tasks (60%)

   Next session: Run 'dev-kid recall' to resume
```

#### Algorithm

```bash
1. Call sync_memory.sh
2. Generate snapshot filename with timestamp
3. Get current state:
   - Git HEAD commit
   - Modified files (git diff --name-only)
   - Progress from tasks.md
   - Mental state from activeContext.md
4. Create JSON snapshot with all state
5. Create symlink snapshot_latest.json
6. Call checkpoint.sh with progress message
7. Print summary and resume instructions
```

#### Usage Examples

**End of session**:
```bash
finalize_session.sh
```

**Via CLI**:
```bash
dev-kid finalize
```

**Claude Code**:
```
User: "Let's wrap up for today"
Agent: Finalizing session...
[finalize_session.sh executed]
```

#### Exit Codes

- `0`: Session finalized successfully
- `1`: Snapshot creation failed
- `2`: Git checkpoint failed

#### Edge Cases

**No tasks.md**:
- Progress: 0/0 tasks (0%)
- Snapshot created normally

**No git**:
- Current commit: "none"
- Snapshot created, but checkpoint fails (non-fatal warning)

**No modified files**:
- files_modified: []
- Snapshot created normally

---

### recall.sh

Resume from last session snapshot.

#### Metadata

**File**: `~/.dev-kid/skills/recall.sh`
**Triggers**: session start, "recall", "resume session"
**Dependencies**: jq
**Runtime**: ~100ms

#### Purpose

Restore session context from snapshot to resume work exactly where left off. Provides 30-second recovery from any session.

#### Input

**Required**:
- `.claude/session_snapshots/snapshot_latest.json`

#### Output

**Session restored**:
```
ðŸ§  Recalling last session...

ðŸ“Š Session Restored from: 2026-01-05T14:30:00Z

ðŸ“Œ Phase: Feature implementation: user auth
ðŸ“ˆ Progress: 12/20 tasks (60%)

ðŸ’­ Mental State:
Working on user authentication endpoint
Recent changes: Added JWT token generation
Modified files: src/auth.py, tests/test_auth.py

ðŸŽ¯ Next Steps:
   - Review progress.md
   - Update projectbrief.md if needed
   - Continue next task from tasks.md

âœ… Session context restored

Ready to continue? Run:
  dev-kid orchestrate    # Plan remaining tasks
  dev-kid execute         # Execute waves
  dev-kid sync-memory    # Update Memory Bank
```

**No previous session**:
```
ðŸ§  Recalling last session...
   â„¹ï¸  No previous session found - starting fresh

   Suggested next steps:
   1. Update memory-bank/shared/projectbrief.md
   2. Create tasks.md with initial tasks
   3. Run 'dev-kid orchestrate' to plan execution
```

#### Algorithm

```bash
1. Check if snapshot_latest.json exists
   - If not: print fresh start message, exit 0
2. Parse snapshot JSON with jq:
   - timestamp
   - mental_state
   - progress, completed, total
   - current_phase
   - next_steps
   - blockers
3. Display formatted session summary
4. Show blockers if any exist
5. Print resumption suggestions
```

#### Usage Examples

**Morning resume**:
```bash
recall.sh
```

**Via CLI**:
```bash
dev-kid recall
```

**Claude Code**:
```
User: "What was I working on?"
Agent: Let me recall the last session...
[recall.sh executed]
```

#### Exit Codes

- `0`: Always (success or no session)

#### Edge Cases

**First session**:
- snapshot_latest.json doesn't exist
- Provides getting started guidance

**Blockers present**:
- Displays ðŸš§ Blockers section
- Lists each blocker

**Empty next_steps**:
- Section not displayed
- No errors

---

## Skill Integration

### Calling Other Skills

Skills can call other skills using relative or absolute paths:

```bash
# Get script directory
SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"

# Call another skill
if [ -f "$SCRIPT_DIR/sync_memory.sh" ]; then
    "$SCRIPT_DIR/sync_memory.sh"
fi
```

**Example**: checkpoint.sh calls sync_memory.sh

### Dependency Chain

```
finalize_session.sh
  â”œâ”€ sync_memory.sh
  â””â”€ checkpoint.sh
       â””â”€ sync_memory.sh

recall.sh
  â””â”€ (no dependencies)

verify_existence.sh
  â””â”€ (no dependencies)

maintain_integrity.sh
  â””â”€ (no dependencies)
```

### CLI Integration

All skills can be invoked via CLI commands:

```bash
dev-kid sync-memory      â†’ sync_memory.sh
dev-kid checkpoint MSG   â†’ checkpoint.sh MSG
dev-kid verify FILE      â†’ verify_existence.sh FILE
dev-kid validate         â†’ maintain_integrity.sh
dev-kid finalize         â†’ finalize_session.sh
dev-kid recall           â†’ recall.sh
```

### Claude Code Integration

Skills auto-activate on keyword detection:

**sync_memory.sh**:
- "sync memory", "update memory", "refresh memory bank"

**checkpoint.sh**:
- "checkpoint", "create checkpoint", "save progress"

**verify_existence.sh**:
- "verify files", "check files exist", "anti-hallucination check"

**maintain_integrity.sh**:
- "validate system", "check integrity", "verify structure"

**finalize_session.sh**:
- "finalize session", "wrap up", "end session"

**recall.sh**:
- "recall", "resume session", "what was I working on"

---

## Creating New Skills

### Skill Template

```bash
#!/usr/bin/env bash
# Skill: [Skill Name]
# Trigger: [keyword1, keyword2, condition]

set -e  # Exit on error

echo "ðŸŽ¯ [Action description]..."

# Get script directory (for calling other skills)
SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"

# --- Implementation ---

# Read inputs
INPUT="${1:-default_value}"

# Validate inputs
if [ -z "$INPUT" ]; then
    echo "âŒ Error: Missing required input"
    exit 1
fi

# Perform operations
# ... your logic here ...

# Persist state
echo "Data" > .claude/new_state.json

# Call other skills if needed
if [ -f "$SCRIPT_DIR/sync_memory.sh" ]; then
    "$SCRIPT_DIR/sync_memory.sh"
fi

# Success output
echo "âœ… [Action] complete"
```

### Skill Checklist

- [ ] Shebang: `#!/usr/bin/env bash`
- [ ] Error handling: `set -e`
- [ ] Header comment with trigger conditions
- [ ] Emoji status messages
- [ ] Input validation
- [ ] State persistence (write to disk)
- [ ] Exit codes (0=success, 1=error)
- [ ] Script directory resolution (for calling skills)
- [ ] Idempotent operations (safe to run multiple times)

### Installation

```bash
# 1. Create skill in dev-kid/skills/
vim ~/.dev-kid/skills/new_skill.sh

# 2. Make executable
chmod +x ~/.dev-kid/skills/new_skill.sh

# 3. Install to Claude Code
cp ~/.dev-kid/skills/new_skill.sh ~/.claude/skills/planning-enhanced/

# 4. Test
~/.dev-kid/skills/new_skill.sh
```

### Testing

```bash
# Unit test
cd test-project
~/.dev-kid/skills/new_skill.sh test-input

# Integration test (with other skills)
dev-kid status  # Ensure system healthy
~/.dev-kid/skills/new_skill.sh
dev-kid validate  # Check integrity after

# Error cases
~/.dev-kid/skills/new_skill.sh ""  # Missing input
~/.dev-kid/skills/new_skill.sh invalid  # Invalid input
```

---

**Skills Reference v2.0.0**
Complete reference for all dev-kid skills and skill development
